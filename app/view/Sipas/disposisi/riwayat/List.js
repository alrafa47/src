/*
 * File: app/view/Sipas/disposisi/riwayat/List.js
 *
 * This file was generated by Sencha Architect version 3.5.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('SIPAS.view.Sipas.disposisi.riwayat.List', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.sipas_disposisi_riwayat_list',

    requires: [
        'SIPAS.view.Sipas.com.button.Refresh',
        'Ext.grid.View',
        'Ext.grid.column.Column',
        'Ext.toolbar.Toolbar',
        'Ext.button.Button'
    ],

    border: false,
    autoScroll: true,
    title: 'Riwayat Disposisi',
    emptyText: 'Tidak Ada Riwayat',
    hideHeaders: true,
    store: 'Sipas.disposisi.riwayat.List',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            columns: [
                {
                    xtype: 'gridcolumn',
                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                        if(record.get('perintah_nama')){
                            if(record.get('disposisi_pesan')){
                                p = '<span class="badge badge-solid margin-right-4"><i class="icon ion-md-quote grey-700"></i></span>'+record.get('perintah_nama')+
                                ', '+record.get('disposisi_pesan')+'</span> ';
                            }else{
                                p = '<span class="badge badge-solid margin-right-4"><i class="icon ion-md-quote grey-700"></i></span>'+record.get('perintah_nama');
                            }
                        }else{
                            p = '';
                        }

                        if(value){
                            d = '<span class="badge badge-solid margin-right-4"><i class="icon ion-md-calendar grey-700"></i></span>'+Ext.util.Format.date(value, 'd M Y H:i');
                        }

                        if (record.get('disposisi_jumlah_penerima') !== record.get('disposisi_jumlah_penerima_sdhproses')) {
                            t = '<span class="warning"><span class="badge badge-solid margin-right-4"><i class="icon ion-md-send orange-500-i"></i></span>Proses pengiriman ke '+record.get('disposisi_jumlah_penerima_sdhproses')+'/'+record.get('disposisi_jumlah_penerima')+' orang</span>';
                        } else {
                            if(record.get('disposisi_model_sub') === 1){
                                t = '<span class="info"><span class="badge badge-solid margin-right-4"><i class="icon ion-md-send green-500-i"></i></span>Mengirim Nota Dinas ke '+record.get('disposisi_jumlah_penerima')+' orang</span>';
                            }else{
                                t = '<span class="info"><span class="badge badge-solid margin-right-4"><i class="icon ion-md-send green-500-i"></i></span>Mengirim Disposisi ke '+record.get('disposisi_jumlah_penerima')+' orang</span>';
                            }
                        }

                        if(record.get('disposisi_iscabut') === 1){
                            return new Ext.XTemplate(['<div class="cell-row"><div class="cell-text margin-left-12">',
                            '<div class="supporttext supporttext-black">',
                            '<span class="danger">',
                            '<span class="badge badge-solid margin-right-4">',
                            '<i class="icon {icon} {color}"></i>',
                            '</span>{cabut}',
                            '</span>',
                            '</div>',
                            '<div class="supporttext supporttext-dark">Pada {cabut_tgl}</div>',
                            '<div class="supporttext supporttext-black">{d}</div>',
                            '<div class="supporttext supporttext-black">{t}</div>',
                            '<div class="supporttext supporttext-black">{p}</div>',
                            '</div></div>']).apply({
                                p: p,
                                d: d,
                                t: t,
                                icon: 'ion-md-document',
                                color: 'red-700-i',
                                cabut: 'Disposisi ini telah direvisi',
                                cabut_tgl: Ext.util.Format.date(record.get('disposisi_cabut_tgl'), 'd M Y H:i')
                            });
                        }else{
                            return new Ext.XTemplate(['<div class="cell-text margin-left-12">',
                            '<div class="supporttext supporttext-black">{d}</div>',
                            '<div class="supporttext supporttext-black">{t}</div>',
                            '<div class="supporttext supporttext-black">{p}</div>',
                            '</div>']).apply({
                                p:p, d:d, t:t
                            });
                        }
                    },
                    sortable: true,
                    dataIndex: 'disposisi_tgl',
                    text: 'Penerima',
                    flex: 1
                }
            ],
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    hidden: true,
                    itemId: 'toolbarControl',
                    items: [
                        {
                            xtype: 'sipas_com_button_refresh',
                            action: 'reload'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

});